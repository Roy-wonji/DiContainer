{"primaryContentSections":[{"content":[{"type":"heading","text":"개요","anchor":"%EA%B0%9C%EC%9A%94","level":2},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"목표: 앱 시작 시점에 필요한 의존성을 한곳에서 명확하게 초기화","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"특징:","type":"text"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"동기\/비동기\/혼합 부트스트랩 지원","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"전역 컨테이너의 원자적 교체(스레드 안전)","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"테스트 격리\/리셋 API 제공","type":"text"}],"type":"paragraph"}]}]}]}]},{"type":"heading","text":"사용 시점","anchor":"%EC%82%AC%EC%9A%A9-%EC%8B%9C%EC%A0%90","level":2},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"AppDelegate\/SceneDelegate\/앱 엔트리포인트에서 한 번만 호출","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"SwiftUI App 구조에서는 ","type":"text"},{"code":"@main","type":"codeVoice"},{"text":" 진입부 또는 초기 View-Model 구성 시점","type":"text"}],"type":"paragraph"}]}]},{"type":"heading","text":"동기 부트스트랩","anchor":"%EB%8F%99%EA%B8%B0-%EB%B6%80%ED%8A%B8%EC%8A%A4%ED%8A%B8%EB%9E%A9","level":2},{"type":"codeListing","syntax":"swift","code":["import DiContainer","","await DIContainer.bootstrap { container in","    container.register(Logger.self) { ConsoleLogger() }","    container.register(Networking.self) { DefaultNetworking() }","    container.register(UserRepository.self) { UserRepositoryImpl() }","}","","\/\/ 이후 어디서든 DIContainer.shared.resolve(...) 사용 가능","let logger = DIContainer.shared.resolve(Logger.self)"]},{"type":"heading","text":"비동기 부트스트랩","anchor":"%EB%B9%84%EB%8F%99%EA%B8%B0-%EB%B6%80%ED%8A%B8%EC%8A%A4%ED%8A%B8%EB%9E%A9","level":2},{"type":"paragraph","inlineContent":[{"type":"text","text":"비동기 초기화가 필요한 경우(예: 원격 설정, 데이터베이스 연결 등)에는 "},{"type":"codeVoice","code":"bootstrapAsync"},{"type":"text","text":"를 사용합니다."}]},{"type":"codeListing","syntax":"swift","code":["let ok = await DIContainer.bootstrapAsync { container in","    \/\/ 예: 원격 설정 로드","    let config = try await RemoteConfig.load()","    container.register(AppConfig.self) { config }","","    \/\/ 예: 비동기 리소스 초기화","    let db = try await Database.open()","    container.register(Database.self) { db }","}","","guard ok else { \/* 실패 처리 (스플래시\/알림\/재시도) *\/ return }"]},{"type":"aside","style":"note","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":""},{"type":"codeVoice","code":"bootstrapAsync"},{"type":"text","text":"는 실패 시 DEBUG 빌드에선 "},{"type":"codeVoice","code":"fatalError"},{"type":"text","text":", RELEASE에선 "},{"type":"codeVoice","code":"false"},{"type":"text","text":"를 반환하도록 구성할 수 있습니다. 현재 구현은 내부 로깅과 함께 Bool 반환을 제공합니다."}]}],"name":"참고"},{"type":"heading","text":"혼합 부트스트랩 (sync + async)","anchor":"%ED%98%BC%ED%95%A9-%EB%B6%80%ED%8A%B8%EC%8A%A4%ED%8A%B8%EB%9E%A9-sync-+-async","level":2},{"type":"paragraph","inlineContent":[{"type":"text","text":"핵심 의존성은 즉시, 부가 의존성은 비동기로 준비하고 싶을 때 유용합니다."}]},{"type":"codeListing","syntax":"swift","code":["@MainActor","await DIContainer.bootstrapMixed(","    sync: { container in","        container.register(Logger.self) { ConsoleLogger() }","        container.register(Networking.self) { DefaultNetworking() }","    },","    async: { container in","        \/\/ 비동기 확장 의존성","        let analytics = await AnalyticsClient.make()","        container.register(AnalyticsClient.self) { analytics }","    }",")"]},{"type":"heading","text":"백그라운드 Task에서 부트스트랩","anchor":"%EB%B0%B1%EA%B7%B8%EB%9D%BC%EC%9A%B4%EB%93%9C-Task%EC%97%90%EC%84%9C-%EB%B6%80%ED%8A%B8%EC%8A%A4%ED%8A%B8%EB%9E%A9","level":2},{"type":"paragraph","inlineContent":[{"type":"text","text":"앱 시작 지연을 최소화하고 싶을 때 백그라운드에서 비동기 부트스트랩을 수행할 수 있습니다."}]},{"type":"codeListing","syntax":"swift","code":["DIContainer.bootstrapInTask { container in","    let featureFlags = try await FeatureFlags.fetch()","    container.register(FeatureFlags.self) { featureFlags }","}"]},{"type":"heading","text":"조건부 부트스트랩","anchor":"%EC%A1%B0%EA%B1%B4%EB%B6%80-%EB%B6%80%ED%8A%B8%EC%8A%A4%ED%8A%B8%EB%9E%A9","level":2},{"type":"paragraph","inlineContent":[{"text":"이미 초기화된 경우는 건너뛰고 싶을 때 사용합니다.","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["let didInit = await DIContainer.bootstrapIfNeeded { container in","    container.register(Logger.self) { ConsoleLogger() }","}","","if !didInit {","    \/\/ 이미 준비됨","}"]},{"type":"paragraph","inlineContent":[{"text":"비동기 버전도 제공합니다.","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["let didInit = await DIContainer.bootstrapAsyncIfNeeded { container in","    let remote = try await RemoteConfig.load()","    container.register(RemoteConfig.self) { remote }","}"]},{"type":"heading","text":"접근 보장(Assert)","anchor":"%EC%A0%91%EA%B7%BC-%EB%B3%B4%EC%9E%A5Assert","level":2},{"type":"paragraph","inlineContent":[{"text":"부트스트랩 전에 DI에 접근하지 않도록 강제할 때 사용합니다.","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["DIContainer.ensureBootstrapped() \/\/ 미부트스트랩 시 precondition 실패"]},{"type":"heading","text":"테스트 가이드","anchor":"%ED%85%8C%EC%8A%A4%ED%8A%B8-%EA%B0%80%EC%9D%B4%EB%93%9C","level":2},{"type":"paragraph","inlineContent":[{"text":"테스트마다 깨끗한 컨테이너를 원하면 리셋 API를 사용합니다.","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["@MainActor","override func setUp() async throws {","    try await super.setUp()","    await DIContainer.resetForTesting() \/\/ DEBUG 빌드에서만 허용","","    \/\/ 테스트 전용 등록","    DIContainer.shared.register(MockService.self) { MockService() }","}"]},{"level":2,"anchor":"%EB%B2%A0%EC%8A%A4%ED%8A%B8-%ED%94%84%EB%9E%99%ED%8B%B0%EC%8A%A4","text":"베스트 프랙티스","type":"heading"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"한 곳에서만 부트스트랩: 앱 진입점(또는 테스트 setUp)에서 단 한 번"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"실패 처리 분기: 비동기 부트스트랩은 실패 시 사용자 경험을 고려한 경로 준비"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"혼합 패턴 권장: 필수 의존성은 동기, 부가 의존성은 비동기 등록"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"접근 보장: 개발 단계에서는 "},{"type":"codeVoice","code":"ensureBootstrapped()"},{"type":"text","text":"로 실수 조기 발견"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"테스트 격리: 각 테스트 시작 전 "},{"type":"codeVoice","code":"resetForTesting()"},{"type":"text","text":" 호출"}],"type":"paragraph"}]}],"type":"unorderedList"},{"level":2,"text":"관련 문서","type":"heading","anchor":"%EA%B4%80%EB%A0%A8-%EB%AC%B8%EC%84%9C"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"isActive":true,"type":"reference","identifier":"doc:\/\/DiContainer\/documentation\/DiContainer\/QuickStart"}]}]},{"content":[{"inlineContent":[{"isActive":true,"identifier":"doc:\/\/DiContainer\/documentation\/DiContainer\/CoreAPIs","type":"reference"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"isActive":true,"type":"reference","identifier":"doc:\/\/DiContainer\/documentation\/DiContainer\/UnifiedDI"}]}]}],"type":"unorderedList"}],"kind":"content"}],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/DiContainer\/documentation\/DiContainer\/Bootstrap"},"hierarchy":{"paths":[["doc:\/\/DiContainer\/documentation\/DiContainer"]]},"kind":"article","sections":[],"schemaVersion":{"major":0,"patch":0,"minor":3},"metadata":{"modules":[{"name":"DiContainer"}],"title":"부트스트랩 가이드 (Bootstrap)","role":"article","roleHeading":"Article"},"abstract":[{"type":"text","text":"앱 시작 시 의존성을 안전하고 일관되게 준비하는 방법을 소개합니다. DiContainer는 다양한 부트스트랩 패턴을 제공하여 동기\/비동기 초기화, 테스트 격리, 조건부 초기화 등을 유연하게 구성할 수 있습니다."}],"variants":[{"paths":["\/documentation\/dicontainer\/bootstrap"],"traits":[{"interfaceLanguage":"swift"}]}],"references":{"doc://DiContainer/documentation/DiContainer/CoreAPIs":{"type":"topic","role":"article","title":"코어 API 가이드","identifier":"doc:\/\/DiContainer\/documentation\/DiContainer\/CoreAPIs","abstract":[],"kind":"article","url":"\/documentation\/dicontainer\/coreapis"},"doc://DiContainer/documentation/DiContainer":{"title":"DiContainer","identifier":"doc:\/\/DiContainer\/documentation\/DiContainer","abstract":[],"url":"\/documentation\/dicontainer","kind":"symbol","type":"topic","role":"collection"},"doc://DiContainer/documentation/DiContainer/QuickStart":{"url":"\/documentation\/dicontainer\/quickstart","identifier":"doc:\/\/DiContainer\/documentation\/DiContainer\/QuickStart","type":"topic","abstract":[{"text":"DiContainer를 5분만에 시작해보세요!","type":"text"}],"title":"빠른 시작 가이드","kind":"article","role":"article"},"doc://DiContainer/documentation/DiContainer/UnifiedDI":{"url":"\/documentation\/dicontainer\/unifieddi","kind":"article","title":"통합 DI 시스템 - UnifiedDI vs DI","type":"topic","abstract":[{"type":"text","text":"DiContainer 2.0은 두 가지 주요 API 진입점을 제공합니다: "},{"type":"codeVoice","code":"UnifiedDI"},{"type":"text","text":"와 "},{"type":"codeVoice","code":"DI"},{"type":"text","text":". 각각의 역할과 사용 시나리오를 이해하여 프로젝트에 최적한 선택을 하세요."}],"role":"article","identifier":"doc:\/\/DiContainer\/documentation\/DiContainer\/UnifiedDI"}}}