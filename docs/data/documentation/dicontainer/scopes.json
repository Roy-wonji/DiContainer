{"sections":[],"hierarchy":{"paths":[["doc:\/\/DiContainer\/documentation\/DiContainer"]]},"metadata":{"roleHeading":"Article","title":"스코프 가이드 (Screen \/ Session \/ Request)","role":"article","modules":[{"name":"DiContainer"}]},"schemaVersion":{"minor":3,"patch":0,"major":0},"seeAlsoSections":[{"anchor":"성능-최적화","identifiers":["doc:\/\/DiContainer\/documentation\/DiContainer\/ActorHop","doc:\/\/DiContainer\/documentation\/DiContainer\/SimplePerformanceOptimizer","doc:\/\/DiContainer\/documentation\/DiContainer\/UnifiedRegistry"],"title":"성능 최적화","generated":true}],"variants":[{"paths":["\/documentation\/dicontainer\/scopes"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/DiContainer\/documentation\/DiContainer\/Scopes","interfaceLanguage":"swift"},"abstract":[{"text":"DiContainer는 화면\/세션\/요청 등 컨텍스트 단위로 의존성을 격리·캐시할 수 있는 스코프 기능을 제공합니다.","type":"text"}],"primaryContentSections":[{"kind":"content","content":[{"text":"왜 스코프가 필요한가?","type":"heading","level":2,"anchor":"%EC%99%9C-%EC%8A%A4%EC%BD%94%ED%94%84%EA%B0%80-%ED%95%84%EC%9A%94%ED%95%9C%EA%B0%80"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"한 화면에서만 유지되어야 할 상태(예: 화면 캐시)"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"사용자 세션과 함께 사라져야 하는 데이터(예: 사용자별 서비스)"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"요청 단위로 재사용되는 객체(예: RequestContext)"}],"type":"paragraph"}]}]},{"text":"핵심 타입","type":"heading","level":2,"anchor":"%ED%95%B5%EC%8B%AC-%ED%83%80%EC%9E%85"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"codeVoice","code":"ScopeKind"},{"type":"text","text":": "},{"type":"codeVoice","code":".screen"},{"type":"text","text":", "},{"type":"codeVoice","code":".session"},{"type":"text","text":", "},{"type":"codeVoice","code":".request"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":"ScopeContext"},{"type":"text","text":": 현재 스코프 ID 관리 ("},{"type":"codeVoice","code":"setCurrent(_:, id:)"},{"type":"text","text":", "},{"type":"codeVoice","code":"clear(_:)"},{"type":"text","text":", "},{"type":"codeVoice","code":"currentID(for:)"},{"type":"text","text":")"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":"registerScoped"},{"type":"text","text":" \/ "},{"type":"codeVoice","code":"registerAsyncScoped"},{"type":"text","text":": 스코프 단위 등록"}],"type":"paragraph"}]}]},{"text":"사용 예제","type":"heading","level":2,"anchor":"%EC%82%AC%EC%9A%A9-%EC%98%88%EC%A0%9C"},{"text":"스크린 스코프","type":"heading","level":3,"anchor":"%EC%8A%A4%ED%81%AC%EB%A6%B0-%EC%8A%A4%EC%BD%94%ED%94%84"},{"code":["\/\/ 화면 진입 시","ScopeContext.shared.setCurrent(.screen, id: \"Home\")","","await GlobalUnifiedRegistry.registerScoped(HomeViewModel.self, scope: .screen) {","    HomeViewModel()","}","","let vm = UnifiedDI.resolve(HomeViewModel.self)","","\/\/ 화면 종료 시","ScopeContext.shared.clear(.screen)"],"type":"codeListing","syntax":"swift"},{"text":"세션 스코프","type":"heading","level":3,"anchor":"%EC%84%B8%EC%85%98-%EC%8A%A4%EC%BD%94%ED%94%84"},{"code":["\/\/ 로그인 성공 시","ScopeContext.shared.setCurrent(.session, id: user.id)","await GlobalUnifiedRegistry.registerScoped(UserSession.self, scope: .session) {","    UserSession(user: user)","}","","\/\/ 세션 내 어디서든 재사용","let session = UnifiedDI.resolve(UserSession.self)","","\/\/ 로그아웃 시","ScopeContext.shared.clear(.session)"],"type":"codeListing","syntax":"swift"},{"text":"요청 스코프","type":"heading","level":3,"anchor":"%EC%9A%94%EC%B2%AD-%EC%8A%A4%EC%BD%94%ED%94%84"},{"code":["ScopeContext.shared.setCurrent(.request, id: UUID().uuidString)","await GlobalUnifiedRegistry.registerAsyncScoped(RequestContext.self, scope: .request) {","    await RequestContext.create()","}","let ctx = await UnifiedDI.resolveAsync(RequestContext.self)","ScopeContext.shared.clear(.request)"],"type":"codeListing","syntax":"swift"},{"text":"수명 주기 헬퍼 (권장 패턴)","type":"heading","level":2,"anchor":"%EC%88%98%EB%AA%85-%EC%A3%BC%EA%B8%B0-%ED%97%AC%ED%8D%BC-%EA%B6%8C%EC%9E%A5-%ED%8C%A8%ED%84%B4"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"iOS 화면: "},{"type":"codeVoice","code":"viewWillAppear"},{"type":"text","text":"에서 "},{"type":"codeVoice","code":".screen"},{"type":"text","text":" 설정, "},{"type":"codeVoice","code":"viewDidDisappear"},{"type":"text","text":"에서 해제"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"세션: 로그인\/로그아웃 이벤트에서 "},{"type":"codeVoice","code":".session"},{"type":"text","text":" 설정\/해제"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"서버\/백엔드 유사 아키텍처: 요청 수신 시 "},{"type":"codeVoice","code":".request"},{"type":"text","text":" 설정, 완료 시 해제"}],"type":"paragraph"}]}]},{"type":"aside","style":"note","name":"주의","content":[{"inlineContent":[{"type":"text","text":"스코프 ID가 설정되지 않은 경우, 스코프 등록은 일회성 생성으로 동작(캐시 없음)합니다."}],"type":"paragraph"}]},{"text":"문제 해결","type":"heading","level":2,"anchor":"%EB%AC%B8%EC%A0%9C-%ED%95%B4%EA%B2%B0"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"“스코프가 적용되지 않아요” → "},{"type":"codeVoice","code":"ScopeContext.shared.currentID(for:)"},{"type":"text","text":"가 nil인지 확인"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"“메모리 누수?” → 화면\/세션 종료 시 "},{"type":"codeVoice","code":"clear(_:)"},{"type":"text","text":" 호출했는지 확인"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"“동시성 안전?” → UnifiedRegistry는 actor 기반이며 스코프 캐시는 내부에서 안전하게 동기화됩니다."}],"type":"paragraph"}]}]}]}],"kind":"article","references":{"doc://DiContainer/documentation/DiContainer":{"url":"\/documentation\/dicontainer","role":"collection","type":"topic","abstract":[{"text":"현대적인 Swift Concurrency와 Actor 모델을 위해 설계된 고성능 의존성 주입 프레임워크","type":"text"}],"title":"DiContainer","identifier":"doc:\/\/DiContainer\/documentation\/DiContainer","kind":"symbol"},"doc://DiContainer/documentation/DiContainer/UnifiedRegistry":{"url":"\/documentation\/dicontainer\/unifiedregistry","kind":"symbol","type":"topic","navigatorTitle":[{"text":"UnifiedRegistry","kind":"identifier"}],"title":"UnifiedRegistry","role":"symbol","identifier":"doc:\/\/DiContainer\/documentation\/DiContainer\/UnifiedRegistry","fragments":[{"kind":"keyword","text":"actor"},{"text":" ","kind":"text"},{"kind":"identifier","text":"UnifiedRegistry"}],"abstract":[]},"doc://DiContainer/documentation/DiContainer/ActorHop":{"title":"Actor Hop (KR)","kind":"article","identifier":"doc:\/\/DiContainer\/documentation\/DiContainer\/ActorHop","role":"article","abstract":[{"text":"DiContainer 2.0의 Actor Hop 최적화 기술로 Swift Concurrency에서 최대 성능을 달성하는 방법을 알아보세요.","type":"text"}],"url":"\/documentation\/dicontainer\/actorhop","type":"topic"},"doc://DiContainer/documentation/DiContainer/SimplePerformanceOptimizer":{"url":"\/documentation\/dicontainer\/simpleperformanceoptimizer","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"SimplePerformanceOptimizer"}],"title":"SimplePerformanceOptimizer","role":"symbol","identifier":"doc:\/\/DiContainer\/documentation\/DiContainer\/SimplePerformanceOptimizer","fragments":[{"text":"enum","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"SimplePerformanceOptimizer"}],"abstract":[{"text":"간단하고 효과적인 성능 최적화 시스템","type":"text"}]}}}