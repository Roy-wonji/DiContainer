{"schemaVersion":{"minor":3,"major":0,"patch":0},"hierarchy":{"paths":[["doc:\/\/DiContainer\/documentation\/DiContainer"]]},"primaryContentSections":[{"kind":"content","content":[{"type":"heading","text":"개요","level":2,"anchor":"%EA%B0%9C%EC%9A%94"},{"type":"paragraph","inlineContent":[{"type":"text","text":"DiContainer 2.0은 Swift Concurrency와 자동 최적화를 완벽 지원하는 현대적인 의존성 주입 프레임워크입니다. 이 가이드에서는 가장 기본적인 사용 방법부터 고급 기능까지 단계별로 안내합니다."}]},{"type":"heading","text":"1단계: 설치","level":2,"anchor":"1%EB%8B%A8%EA%B3%84-%EC%84%A4%EC%B9%98"},{"type":"heading","text":"Swift Package Manager","level":3,"anchor":"Swift-Package-Manager"},{"type":"codeListing","code":["dependencies: [","    .package(url: \"https:\/\/github.com\/Roy-wonji\/DiContainer.git\", from: \"2.0.0\")","]"],"syntax":"swift"},{"type":"heading","text":"Xcode에서 설치","level":3,"anchor":"Xcode%EC%97%90%EC%84%9C-%EC%84%A4%EC%B9%98"},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Xcode에서 프로젝트 열기"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"File → Add Package Dependencies"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"URL 입력: "},{"type":"codeVoice","code":"https:\/\/github.com\/Roy-wonji\/DiContainer.git"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Add Package"}]}]}]},{"type":"heading","text":"2단계: 임포트","level":2,"anchor":"2%EB%8B%A8%EA%B3%84-%EC%9E%84%ED%8F%AC%ED%8A%B8"},{"type":"codeListing","code":["import DiContainer"],"syntax":"swift"},{"type":"heading","text":"3단계: 첫 번째 의존성 등록","level":2,"anchor":"3%EB%8B%A8%EA%B3%84-%EC%B2%AB-%EB%B2%88%EC%A7%B8-%EC%9D%98%EC%A1%B4%EC%84%B1-%EB%93%B1%EB%A1%9D"},{"type":"heading","text":"서비스 정의","level":3,"anchor":"%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A0%95%EC%9D%98"},{"type":"codeListing","code":["\/\/ 프로토콜 정의","protocol UserService {","    func getUser(id: String) -> User?","    func saveUser(_ user: User) throws","}","","\/\/ 구현체 정의","class UserServiceImpl: UserService {","    func getUser(id: String) -> User? {","        \/\/ 사용자 조회 로직","        return User(id: id, name: \"Sample User\")","    }","","    func saveUser(_ user: User) throws {","        \/\/ 사용자 저장 로직","        Log.debug(\"Saving user: \\(user.name)\")","    }","}"],"syntax":"swift"},{"type":"heading","text":"의존성 등록 (UnifiedDI 사용)","level":3,"anchor":"%EC%9D%98%EC%A1%B4%EC%84%B1-%EB%93%B1%EB%A1%9D-UnifiedDI-%EC%82%AC%EC%9A%A9"},{"syntax":"swift","code":["\/\/ 앱 시작 시점에 등록","let userService = UnifiedDI.register(UserService.self) {","    UserServiceImpl()","}","","\/\/ 즉시 사용 가능","let user = userService.getUser(id: \"123\")"],"type":"codeListing"},{"text":"4단계: Property Wrapper로 주입","anchor":"4%EB%8B%A8%EA%B3%84-Property-Wrapper%EB%A1%9C-%EC%A3%BC%EC%9E%85","level":2,"type":"heading"},{"text":"@Inject - 기본 주입","anchor":"Inject-%EA%B8%B0%EB%B3%B8-%EC%A3%BC%EC%9E%85","level":3,"type":"heading"},{"syntax":"swift","code":["class UserViewController {","    @Inject var userService: UserService?","","    func loadUser() {","        if let service = userService {","            let user = service.getUser(id: \"current\")","            \/\/ UI 업데이트","        }","    }","}"],"type":"codeListing"},{"text":"@Factory - 매번 새로운 인스턴스","anchor":"Factory-%EB%A7%A4%EB%B2%88-%EC%83%88%EB%A1%9C%EC%9A%B4-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4","level":3,"type":"heading"},{"syntax":"swift","code":["class ReportGenerator {","    @Factory var pdfGenerator: PDFGenerator","","    func generateReport() {","        \/\/ 매번 새로운 PDFGenerator 인스턴스 사용","        let pdf = pdfGenerator.create()","        return pdf","    }","}","","\/\/ PDFGenerator 등록","_ = UnifiedDI.register(PDFGenerator.self) {","    PDFGenerator()","}"],"type":"codeListing"},{"text":"@SafeInject - 안전한 주입 (에러 처리)","anchor":"SafeInject-%EC%95%88%EC%A0%84%ED%95%9C-%EC%A3%BC%EC%9E%85-%EC%97%90%EB%9F%AC-%EC%B2%98%EB%A6%AC","level":3,"type":"heading"},{"code":["class APIController {","    @SafeInject var apiService: APIService?","","    func fetchData() async {","        do {","            let service = try apiService.getValue()","            let data = await service.fetchUserData()","            \/\/ 데이터 처리","        } catch {","            Log.error(\"API service not available: \\(error)\")","            \/\/ 대체 로직","        }","    }","}"],"syntax":"swift","type":"codeListing"},{"anchor":"5%EB%8B%A8%EA%B3%84-%EB%8B%A4%EC%96%91%ED%95%9C-%EB%93%B1%EB%A1%9D-%EB%B0%A9%EB%B2%95","level":2,"type":"heading","text":"5단계: 다양한 등록 방법"},{"anchor":"KeyPath-%EB%93%B1%EB%A1%9D","level":3,"type":"heading","text":"KeyPath 등록"},{"code":["\/\/ Extension으로 KeyPath 정의","extension DependencyContainer {","    var userService: UserService? {","        resolve(UserService.self)","    }","}","","\/\/ KeyPath로 등록","let userService = UnifiedDI.register(\\.userService) {","    UserServiceImpl()","}"],"syntax":"swift","type":"codeListing"},{"anchor":"%EC%A1%B0%EA%B1%B4%EB%B6%80-%EB%93%B1%EB%A1%9D","level":3,"type":"heading","text":"조건부 등록"},{"code":["\/\/ 환경에 따른 조건부 등록","let analyticsService = UnifiedDI.Conditional.registerIf(","    AnalyticsService.self,","    condition: isProduction,","    factory: { FirebaseAnalyticsService() },  \/\/ 프로덕션용","    fallback: { MockAnalyticsService() }      \/\/ 개발\/테스트용",")"],"syntax":"swift","type":"codeListing"},{"anchor":"6%EB%8B%A8%EA%B3%84-%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95%EB%93%A4","level":2,"type":"heading","text":"6단계: 해결 방법들"},{"anchor":"%EA%B8%B0%EB%B3%B8-%ED%95%B4%EA%B2%B0","level":3,"type":"heading","text":"기본 해결"},{"code":["\/\/ 옵셔널 해결 (안전)","let service = UnifiedDI.resolve(UserService.self)","if let service = service {","    \/\/ 사용","}","","\/\/ 필수 해결 (없으면 크래시)","let requiredService = UnifiedDI.requireResolve(UserService.self)","\/\/ 항상 유효한 인스턴스","","\/\/ 기본값과 함께 해결","let cacheService = UnifiedDI.resolve(","    CacheService.self,","    default: MemoryCacheService()",")","\/\/ 항상 유효한 인스턴스 (등록되지 않으면 기본값 사용)"],"syntax":"swift","type":"codeListing"},{"anchor":"7%EB%8B%A8%EA%B3%84-%EC%9E%90%EB%8F%99-%EC%B5%9C%EC%A0%81%ED%99%94-%ED%99%9C%EC%9A%A9","level":2,"type":"heading","text":"7단계: 자동 최적화 활용"},{"type":"heading","text":"자동화 기능 켜기","level":3,"anchor":"%EC%9E%90%EB%8F%99%ED%99%94-%EA%B8%B0%EB%8A%A5-%EC%BC%9C%EA%B8%B0"},{"type":"codeListing","code":["\/\/ 앱 시작 시점에 설정","UnifiedDI.setAutoOptimization(true)  \/\/ 기본값: true","UnifiedDI.setLogLevel(.all)          \/\/ 기본값: .all"],"syntax":"swift"},{"type":"heading","text":"자동 수집 정보 확인","level":3,"anchor":"%EC%9E%90%EB%8F%99-%EC%88%98%EC%A7%91-%EC%A0%95%EB%B3%B4-%ED%99%95%EC%9D%B8"},{"code":["\/\/ 사용 통계 확인","let stats = UnifiedDI.stats","Log.debug(\"사용 통계: \\(stats)\")","","\/\/ Actor hop 통계 확인","let actorHopStats = UnifiedDI.actorHopStats","Log.debug(\"Actor hop 통계: \\(actorHopStats)\")","","\/\/ 최적화 제안 확인","let optimizations = UnifiedDI.actorOptimizations","for (type, optimization) in optimizations {","    Log.debug(\"최적화 제안 - \\(type): \\(optimization.suggestion)\")","}","","\/\/ 타입 안전성 이슈 확인","let safetyIssues = UnifiedDI.typeSafetyIssues","for (type, issue) in safetyIssues {","    Log.warning(\"타입 안전성 이슈 - \\(type): \\(issue.suggestion)\")","}"],"type":"codeListing","syntax":"swift"},{"anchor":"8%EB%8B%A8%EA%B3%84-%EC%8B%A4%EC%A0%9C-%EC%95%B1-%EA%B5%AC%EC%A1%B0-%EC%98%88%EC%8B%9C","level":2,"type":"heading","text":"8단계: 실제 앱 구조 예시"},{"anchor":"Appswift","level":3,"type":"heading","text":"App.swift"},{"type":"codeListing","code":["import SwiftUI","import DiContainer","","@main","struct MyApp: App {","    init() {","        setupDependencies()","    }","","    var body: some Scene {","        WindowGroup {","            ContentView()","        }","    }","","    private func setupDependencies() {","        \/\/ 자동 최적화 활성화","        UnifiedDI.setAutoOptimization(true)","        UnifiedDI.setLogLevel(.all)","","        \/\/ Core Services","        _ = UnifiedDI.register(NetworkService.self) {","            URLSessionNetworkService()","        }","","        _ = UnifiedDI.register(DatabaseService.self) {","            CoreDataService()","        }","","        \/\/ Business Services","        _ = UnifiedDI.register(UserService.self) {","            UserServiceImpl()","        }","","        _ = UnifiedDI.register(AuthService.self) {","            AuthServiceImpl()","        }","","        \/\/ Analytics (조건부)","        _ = UnifiedDI.Conditional.registerIf(","            AnalyticsService.self,","            condition: !ProcessInfo.processInfo.arguments.contains(\"--uitests\"),","            factory: { FirebaseAnalyticsService() },","            fallback: { MockAnalyticsService() }","        )","","        Log.debug(\"Dependencies registered successfully\")","    }","}"],"syntax":"swift"},{"type":"heading","text":"ContentView.swift","level":3,"anchor":"ContentViewswift"},{"type":"codeListing","code":["import SwiftUI","import DiContainer","","struct ContentView: View {","    @StateObject private var viewModel = ContentViewModel()","","    var body: some View {","        NavigationView {","            VStack {","                if viewModel.isLoading {","                    ProgressView(\"Loading...\")","                } else {","                    Text(\"Hello, \\(viewModel.currentUser?.name ?? \"Guest\")!\")","                }","","                Button(\"Load User\") {","                    Task {","                        await viewModel.loadCurrentUser()","                    }","                }","            }","            .navigationTitle(\"DiContainer Demo\")","        }","    }","}","","class ContentViewModel: ObservableObject {","    @Published var currentUser: User?","    @Published var isLoading = false","","    @Inject var userService: UserService?","    @Inject var analyticsService: AnalyticsService?","","    @MainActor","    func loadCurrentUser() async {","        isLoading = true","        defer { isLoading = false }","","        analyticsService?.track(event: \"user_load_started\")","","        \/\/ 사용자 로드","        currentUser = userService?.getUser(id: \"current\")","","        analyticsService?.track(event: \"user_load_completed\")","    }","}"],"syntax":"swift"},{"anchor":"9%EB%8B%A8%EA%B3%84-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%84%A4%EC%A0%95","level":2,"type":"heading","text":"9단계: 테스트 설정"},{"anchor":"%ED%85%8C%EC%8A%A4%ED%8A%B8%EC%9A%A9-%EC%9D%98%EC%A1%B4%EC%84%B1-%EC%84%A4%EC%A0%95","level":3,"type":"heading","text":"테스트용 의존성 설정"},{"code":["import XCTest","@testable import DiContainer","","class MyAppTests: XCTestCase {","","    @MainActor","    override func setUp() {","        super.setUp()","","        \/\/ 테스트 환경 초기화","        UnifiedDI.releaseAll()","        UnifiedDI.setLogLevel(.off)  \/\/ 테스트 중 로그 끄기","","        \/\/ Mock 서비스들 등록","        _ = UnifiedDI.register(UserService.self) {","            MockUserService()","        }","","        _ = UnifiedDI.register(NetworkService.self) {","            MockNetworkService()","        }","    }","","    @MainActor","    override func tearDown() {","        UnifiedDI.releaseAll()","        super.tearDown()","    }","","    func testUserServiceRegistration() {","        \/\/ Given","        let userService = UnifiedDI.resolve(UserService.self)","","        \/\/ Then","        XCTAssertNotNil(userService)","        XCTAssertTrue(userService is MockUserService)","    }","}","","\/\/ Mock 구현","class MockUserService: UserService {","    func getUser(id: String) -> User? {","        return User(id: id, name: \"Mock User\")","    }","","    func saveUser(_ user: User) throws {","        \/\/ Mock implementation","    }","}"],"type":"codeListing","syntax":"swift"},{"anchor":"10%EB%8B%A8%EA%B3%84-%EA%B3%A0%EA%B8%89-%EC%82%AC%EC%9A%A9%EB%B2%95-%EB%AF%B8%EB%A6%AC%EB%B3%B4%EA%B8%B0","level":2,"type":"heading","text":"10단계: 고급 사용법 미리보기"},{"anchor":"%EB%B9%84%EB%8F%99%EA%B8%B0-%EC%9D%98%EC%A1%B4%EC%84%B1","level":3,"type":"heading","text":"비동기 의존성"},{"code":["\/\/ 비동기로 초기화되는 서비스","class DatabaseService {","    static func initialize() async -> DatabaseService {","        let service = DatabaseService()","        await service.connect()","        return service","    }","","    private func connect() async {","        \/\/ DB 연결 로직","    }","}","","\/\/ 등록 시","let dbService = await DatabaseService.initialize()","_ = UnifiedDI.register(DatabaseService.self) { dbService }"],"type":"codeListing","syntax":"swift"},{"anchor":"Actor-%EA%B8%B0%EB%B0%98-%EC%84%9C%EB%B9%84%EC%8A%A4","level":3,"type":"heading","text":"Actor 기반 서비스"},{"code":["@MainActor","class UIService {","    func updateUI() {","        \/\/ UI 업데이트 로직 - 자동으로 MainActor에서 실행","    }","}","","\/\/ 등록","_ = UnifiedDI.register(UIService.self) {","    UIService()","}","","\/\/ 사용 - Actor hop 자동 감지","Task {","    let uiService = UnifiedDI.resolve(UIService.self)","    await uiService?.updateUI()  \/\/ MainActor로 자동 hop","}"],"type":"codeListing","syntax":"swift"},{"anchor":"%EB%8B%A4%EC%9D%8C-%EB%8B%A8%EA%B3%84","level":2,"type":"heading","text":"다음 단계"},{"inlineContent":[{"type":"text","text":"이제 DiContainer의 기본 사용법을 익혔습니다! 더 자세한 내용은 다음 가이드들을 참고하세요:"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"isActive":true,"identifier":"PropertyWrappers.md","type":"reference"},{"type":"text","text":" - 모든 Property Wrapper 패턴"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"isActive":true,"identifier":"AutoDIOptimizer.md","type":"reference"},{"type":"text","text":" - 성능 최적화 기능"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"isActive":true,"identifier":"CoreAPIs.md","type":"reference"},{"type":"text","text":" - 모든 API 레퍼런스"}]}]}],"type":"unorderedList"},{"anchor":"%EB%AC%B8%EC%A0%9C-%ED%95%B4%EA%B2%B0","level":2,"type":"heading","text":"문제 해결"},{"anchor":"%EC%9E%90%EC%A3%BC-%EB%B0%9C%EC%83%9D%ED%95%98%EB%8A%94-%EB%AC%B8%EC%A0%9C%EB%93%A4","level":3,"type":"heading","text":"자주 발생하는 문제들"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"의존성이 nil로 해결되는 경우"}]}]},{"type":"codeListing","code":["\/\/ 등록이 해결보다 먼저 되었는지 확인","_ = UnifiedDI.register(Service.self) { ServiceImpl() }","let service = UnifiedDI.resolve(Service.self) \/\/ 이제 정상 동작"],"syntax":"swift"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"테스트에서 의존성이 격리되지 않는 경우"}]}]},{"type":"codeListing","code":["@MainActor","override func setUp() {","    UnifiedDI.releaseAll()  \/\/ 이전 테스트의 의존성 정리","    \/\/ 새 의존성 등록","}"],"syntax":"swift"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"타입 안전성 경고가 나타나는 경우"}]}]},{"type":"codeListing","code":["\/\/ Sendable 프로토콜 추가","protocol UserService: Sendable {","    \/\/ ...","}"],"syntax":"swift"}]}],"type":"orderedList"},{"inlineContent":[{"type":"text","text":"이제 DiContainer를 프로젝트에 통합하고 현대적인 의존성 주입의 혜택을 누려보세요!"}],"type":"paragraph"}]}],"metadata":{"role":"article","title":"빠른 시작 가이드","roleHeading":"Article","modules":[{"name":"DiContainer"}]},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/DiContainer\/documentation\/DiContainer\/QuickStart"},"kind":"article","sections":[],"abstract":[{"text":"DiContainer를 5분만에 시작해보세요!","type":"text"}],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/dicontainer\/quickstart"]}],"references":{"doc://DiContainer/documentation/DiContainer":{"abstract":[],"type":"topic","title":"DiContainer","role":"collection","url":"\/documentation\/dicontainer","kind":"symbol","identifier":"doc:\/\/DiContainer\/documentation\/DiContainer"},"CoreAPIs.md":{"title":"Core API 참조","identifier":"CoreAPIs.md","url":"CoreAPIs.md","titleInlineContent":[{"type":"text","text":"Core API 참조"}],"type":"link"},"AutoDIOptimizer.md":{"title":"자동 최적화 가이드","identifier":"AutoDIOptimizer.md","url":"AutoDIOptimizer.md","titleInlineContent":[{"type":"text","text":"자동 최적화 가이드"}],"type":"link"},"PropertyWrappers.md":{"title":"Property Wrapper 상세 가이드","identifier":"PropertyWrappers.md","url":"PropertyWrappers.md","titleInlineContent":[{"type":"text","text":"Property Wrapper 상세 가이드"}],"type":"link"}}}