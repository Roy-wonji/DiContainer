{"abstract":[{"type":"text","text":"이 문서는 2.x.x에서 3.0.0으로 업그레이드할 때 필요한 변경 사항과 권장 마이그레이션 경로를 정리합니다."}],"schemaVersion":{"major":0,"minor":3,"patch":0},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/dicontainer\/migration-3.0.0"]}],"primaryContentSections":[{"content":[{"anchor":"%EC%9A%94%EC%95%BD","type":"heading","level":2,"text":"요약"},{"type":"paragraph","inlineContent":[{"text":"3.0.0의 핵심은 “읽기 경로 일원화”와 “핫패스 비차단화”입니다. 외부 읽기는 ","type":"text"},{"type":"codeVoice","code":"UnifiedDI"},{"text":"\/","type":"text"},{"type":"codeVoice","code":"DIContainer"},{"text":"의 동기 헬퍼(스냅샷 기반)로 통일되며, 내부 트래킹은 액터 격리하에 비차단(Task)으로 전송됩니다.","type":"text"}]},{"anchor":"%EC%A3%BC%EC%9A%94-%EB%B3%80%EA%B2%BD%EC%A0%90","type":"heading","level":3,"text":"주요 변경점"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"(Breaking) AutoDIOptimizer의 다수 읽기용(nonisolated\/static) API를 내부화(internal) 또는 Deprecated 처리","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"외부에서는 "},{"code":"UnifiedDI","type":"codeVoice"},{"type":"text","text":"\/"},{"code":"DIContainer","type":"codeVoice"},{"type":"text","text":"의 동기 헬퍼만 사용"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"내부에서만 "},{"type":"codeVoice","code":"readSnapshot()"},{"type":"text","text":"을 사용해 스냅샷을 읽고 필요한 정보를 계산"}]}]}]}]},{"content":[{"inlineContent":[{"text":"AutoMonitor를 ","type":"text"},{"type":"codeVoice","code":"@DIActor"},{"text":"로 정렬하여 내부 hop 제거","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"추적 호출(register\/resolve)은 fire-and-forget(Task)로 비차단 전송"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"스냅샷\/그래프 갱신 100ms 디바운스(기본값)","type":"text"}]}]}]},{"anchor":"%EC%98%81%ED%96%A5%EB%8F%84","type":"heading","level":2,"text":"영향도"},{"type":"paragraph","inlineContent":[{"text":"대부분의 프로젝트는 다음 항목만 확인하면 됩니다.","type":"text"}]},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"AutoDIOptimizer의 읽기 API를 직접 호출하던 코드가 있다면 다음 표대로 교체","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"테스트에서 타이밍 민감한 검증은 스냅샷 반영 대기를 폴링(waitUntil\/waitAsyncUntil)으로 변경"}],"type":"paragraph"}]}]},{"text":"API 매핑(Deprecated → Replacement)","type":"heading","level":2,"anchor":"API-%EB%A7%A4%ED%95%91Deprecated-%E2%86%92-Replacement"},{"header":"row","rows":[[[{"inlineContent":[{"text":"Deprecated (AutoDIOptimizer)","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"text":"Replacement","type":"text"}],"type":"paragraph"}]],[[{"inlineContent":[{"code":"getCurrentStats()","type":"codeVoice"}],"type":"paragraph"}],[{"inlineContent":[{"type":"codeVoice","code":"UnifiedDI.stats()"},{"type":"text","text":" \/ "},{"type":"codeVoice","code":"DIContainer.getUsageStatistics()"}],"type":"paragraph"}]],[[{"inlineContent":[{"code":"visualizeGraph()","type":"codeVoice"}],"type":"paragraph"}],[{"inlineContent":[{"type":"codeVoice","code":"UnifiedDI.autoGraph()"},{"type":"text","text":" \/ "},{"type":"codeVoice","code":"DIContainer.getAutoGeneratedGraph()"}],"type":"paragraph"}]],[[{"inlineContent":[{"code":"getFrequentlyUsedTypes()","type":"codeVoice"}],"type":"paragraph"}],[{"inlineContent":[{"type":"codeVoice","code":"UnifiedDI.optimizedTypes()"},{"text":" \/ ","type":"text"},{"type":"codeVoice","code":"DIContainer.getOptimizedTypes()"}],"type":"paragraph"}]],[[{"type":"paragraph","inlineContent":[{"code":"getDetectedCircularDependencies()","type":"codeVoice"}]}],[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"UnifiedDI.circularDependencies()"},{"type":"text","text":" \/ "},{"type":"codeVoice","code":"DIContainer.getDetectedCircularDependencies()"}]}]],[[{"inlineContent":[{"code":"isOptimized(_:)","type":"codeVoice"}],"type":"paragraph"}],[{"inlineContent":[{"type":"codeVoice","code":"UnifiedDI.isOptimized(_:)"},{"text":" \/ ","type":"text"},{"type":"codeVoice","code":"DIContainer.isAutoOptimized(_:)"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"codeVoice","code":"getActorOptimizationSuggestions()"}],"type":"paragraph"}],[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"UnifiedDI.actorOptimizations"}]}]],[[{"type":"paragraph","inlineContent":[{"code":"getDetectedTypeSafetyIssues()","type":"codeVoice"}]}],[{"inlineContent":[{"code":"UnifiedDI.typeSafetyIssues","type":"codeVoice"}],"type":"paragraph"}]],[[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"getDetectedAutoFixedTypes()"}]}],[{"type":"paragraph","inlineContent":[{"code":"UnifiedDI.autoFixedTypes","type":"codeVoice"}]}]],[[{"type":"paragraph","inlineContent":[{"code":"getActorHopStats()","type":"codeVoice"}]}],[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"UnifiedDI.actorHopStats"}]}]],[[{"inlineContent":[{"code":"getAsyncPerformanceStats()","type":"codeVoice"}],"type":"paragraph"}],[{"inlineContent":[{"type":"codeVoice","code":"UnifiedDI.asyncPerformanceStats"}],"type":"paragraph"}]],[[{"inlineContent":[{"code":"getRecentGraphChanges(...)","type":"codeVoice"}],"type":"paragraph"}],[{"inlineContent":[{"code":"UnifiedDI.getGraphChanges(...)","type":"codeVoice"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"codeVoice","code":"getCurrentLogLevel()"}],"type":"paragraph"}],[{"inlineContent":[{"type":"codeVoice","code":"UnifiedDI.logLevel"},{"type":"text","text":" \/ "},{"type":"codeVoice","code":"UnifiedDI.getLogLevel()"}],"type":"paragraph"}]]],"type":"table"},{"style":"note","name":"내부 용도","content":[{"inlineContent":[{"text":"","type":"text"},{"code":"AutoDIOptimizer.readSnapshot()","type":"codeVoice"},{"text":"으로 스냅샷을 읽어 필요한 값을 계산하세요.","type":"text"}],"type":"paragraph"}],"type":"aside"},{"anchor":"%EC%BD%94%EB%93%9C-%EB%B3%80%EA%B2%BD-%EC%98%88%EC%8B%9C","text":"코드 변경 예시","level":2,"type":"heading"},{"anchor":"%EA%B7%B8%EB%9E%98%ED%94%84%ED%86%B5%EA%B3%84-%EC%9D%BD%EA%B8%B0","text":"그래프\/통계 읽기","level":3,"type":"heading"},{"code":["- let graph = AutoDIOptimizer.shared.visualizeGraph()","+ let graph = UnifiedDI.autoGraph()","","- let stats = AutoDIOptimizer.shared.getCurrentStats()","+ let stats = UnifiedDI.stats()","","- let optimized = AutoDIOptimizer.shared.getFrequentlyUsedTypes()","+ let optimized = UnifiedDI.optimizedTypes()"],"syntax":"diff","type":"codeListing"},{"anchor":"%EB%A1%9C%EA%B7%B8-%EB%A0%88%EB%B2%A8","text":"로그 레벨","level":3,"type":"heading"},{"type":"codeListing","syntax":"diff","code":["- let level = AutoDIOptimizer.shared.getCurrentLogLevel()","+ let level = UnifiedDI.logLevel","","- AutoDIOptimizer.shared.setLogLevel(.errors)","+ UnifiedDI.setLogLevel(.errors)"]},{"text":"순환 의존성","type":"heading","anchor":"%EC%88%9C%ED%99%98-%EC%9D%98%EC%A1%B4%EC%84%B1","level":3},{"type":"codeListing","syntax":"diff","code":["- let cycles = AutoDIOptimizer.shared.getDetectedCircularDependencies()","+ let cycles = UnifiedDI.circularDependencies()"]},{"text":"테스트 마이그레이션 팁","type":"heading","anchor":"%ED%85%8C%EC%8A%A4%ED%8A%B8-%EB%A7%88%EC%9D%B4%EA%B7%B8%EB%A0%88%EC%9D%B4%EC%85%98-%ED%8C%81","level":2},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"스냅샷은 비차단 전송 후 디바운스(기본 100ms)로 반영됩니다. 타이밍 민감한 테스트는 폴링 헬퍼를 사용하세요."}],"type":"paragraph"}]}]},{"type":"codeListing","syntax":"swift","code":["waitUntil(description: \"wait snapshot\") {","    UnifiedDI.autoGraph().contains(\"SomeType\")","}"]},{"text":"성능 관련","type":"heading","anchor":"%EC%84%B1%EB%8A%A5-%EA%B4%80%EB%A0%A8","level":2},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"디바운스 간격은 "},{"code":"UnifiedDI.configureOptimization(debounceMs:)","type":"codeVoice"},{"type":"text","text":"에서 설정 가능합니다(권장: 50\/100\/200ms 실험)."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"핫패스에서 추적은 fire-and-forget(Task)로 비차단 전송되어 p95\/p99 지연 개선에 유리합니다."}]}]}]},{"text":"부트스트랩 관련(변경 없음)","level":2,"anchor":"%EB%B6%80%ED%8A%B8%EC%8A%A4%ED%8A%B8%EB%9E%A9-%EA%B4%80%EB%A0%A8%EB%B3%80%EA%B2%BD-%EC%97%86%EC%9D%8C","type":"heading"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"2.x.x의 부트스트랩 API 그대로 사용 가능합니다. 상세는 "},{"identifier":"doc:\/\/DiContainer\/documentation\/DiContainer\/Bootstrap","isActive":true,"type":"reference"},{"type":"text","text":" 참고."}]}]}],"type":"unorderedList"},{"text":"FAQ","type":"heading","level":2,"anchor":"FAQ"},{"text":"AutoDIOptimizer.readSnapshot()을 외부에서 써도 되나요?","type":"heading","level":3,"anchor":"AutoDIOptimizerreadSnapshot%EC%9D%84-%EC%99%B8%EB%B6%80%EC%97%90%EC%84%9C-%EC%8D%A8%EB%8F%84-%EB%90%98%EB%82%98%EC%9A%94"},{"type":"paragraph","inlineContent":[{"text":"내부용을 권장합니다. 외부에서는 ","type":"text"},{"code":"UnifiedDI","type":"codeVoice"},{"text":"\/","type":"text"},{"code":"DIContainer","type":"codeVoice"},{"text":"의 동기 헬퍼(스냅샷 기반)를 사용하세요.","type":"text"}]},{"text":"Deprecated API는 언제 제거되나요?","type":"heading","level":3,"anchor":"Deprecated-API%EB%8A%94-%EC%96%B8%EC%A0%9C-%EC%A0%9C%EA%B1%B0%EB%90%98%EB%82%98%EC%9A%94"},{"type":"paragraph","inlineContent":[{"type":"text","text":"3.x에서 Deprecated로 유지되며, 4.0에서 제거될 수 있습니다. 본 문서의 Replacement로 교체하세요."}]}],"kind":"content"}],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/DiContainer\/documentation\/DiContainer\/MIGRATION-3.0.0"},"sections":[],"metadata":{"title":"DiContainer 3.0.0 마이그레이션 가이드","role":"article","modules":[{"name":"DiContainer"}],"roleHeading":"Article"},"kind":"article","hierarchy":{"paths":[["doc:\/\/DiContainer\/documentation\/DiContainer"]]},"references":{"doc://DiContainer/documentation/DiContainer":{"url":"\/documentation\/dicontainer","role":"collection","type":"topic","identifier":"doc:\/\/DiContainer\/documentation\/DiContainer","abstract":[],"title":"DiContainer","kind":"symbol"},"doc://DiContainer/documentation/DiContainer/Bootstrap":{"abstract":[{"text":"앱 시작 시 의존성을 안전하고 일관되게 준비하는 방법을 소개합니다. DiContainer는 다양한 부트스트랩 패턴을 제공하여 동기\/비동기 초기화, 테스트 격리, 조건부 초기화 등을 유연하게 구성할 수 있습니다.","type":"text"}],"title":"부트스트랩 가이드 (Bootstrap)","role":"article","identifier":"doc:\/\/DiContainer\/documentation\/DiContainer\/Bootstrap","url":"\/documentation\/dicontainer\/bootstrap","kind":"article","type":"topic"}}}