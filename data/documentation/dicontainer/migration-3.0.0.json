{"sections":[],"metadata":{"title":"DiContainer 3.0.0 마이그레이션 가이드","modules":[{"name":"DiContainer"}],"role":"article","roleHeading":"Article"},"schemaVersion":{"major":0,"patch":0,"minor":3},"identifier":{"url":"doc:\/\/DiContainer\/documentation\/DiContainer\/MIGRATION-3.0.0","interfaceLanguage":"swift"},"kind":"article","hierarchy":{"paths":[["doc:\/\/DiContainer\/documentation\/DiContainer"]]},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/dicontainer\/migration-3.0.0"]}],"primaryContentSections":[{"kind":"content","content":[{"text":"요약","type":"heading","anchor":"%EC%9A%94%EC%95%BD","level":2},{"inlineContent":[{"type":"text","text":"3.0.0의 핵심은 “읽기 경로 일원화”와 “핫패스 비차단화”입니다. 외부 읽기는 "},{"code":"UnifiedDI","type":"codeVoice"},{"type":"text","text":"\/"},{"code":"DIContainer","type":"codeVoice"},{"type":"text","text":"의 동기 헬퍼(스냅샷 기반)로 통일되며, 내부 트래킹은 액터 격리하에 비차단(Task)으로 전송됩니다."}],"type":"paragraph"},{"text":"주요 변경점","type":"heading","anchor":"%EC%A3%BC%EC%9A%94-%EB%B3%80%EA%B2%BD%EC%A0%90","level":3},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"(Breaking) AutoDIOptimizer의 다수 읽기용(nonisolated\/static) API를 내부화(internal) 또는 Deprecated 처리"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"text":"외부에서는 ","type":"text"},{"type":"codeVoice","code":"UnifiedDI"},{"text":"\/","type":"text"},{"type":"codeVoice","code":"DIContainer"},{"text":"의 동기 헬퍼만 사용","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"내부에서만 ","type":"text"},{"code":"readSnapshot()","type":"codeVoice"},{"text":"을 사용해 스냅샷을 읽고 필요한 정보를 계산","type":"text"}]}]}],"type":"unorderedList"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"AutoMonitor를 "},{"type":"codeVoice","code":"@DIActor"},{"type":"text","text":"로 정렬하여 내부 hop 제거"}]}]},{"content":[{"inlineContent":[{"text":"추적 호출(register\/resolve)은 fire-and-forget(Task)로 비차단 전송","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"스냅샷\/그래프 갱신 100ms 디바운스(기본값)"}],"type":"paragraph"}]}],"type":"unorderedList"},{"text":"영향도","type":"heading","anchor":"%EC%98%81%ED%96%A5%EB%8F%84","level":2},{"inlineContent":[{"type":"text","text":"대부분의 프로젝트는 다음 항목만 확인하면 됩니다."}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"AutoDIOptimizer의 읽기 API를 직접 호출하던 코드가 있다면 다음 표대로 교체"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"테스트에서 타이밍 민감한 검증은 스냅샷 반영 대기를 폴링(waitUntil\/waitAsyncUntil)으로 변경"}]}]}],"type":"orderedList"},{"text":"API 매핑(Deprecated → Replacement)","type":"heading","anchor":"API-%EB%A7%A4%ED%95%91Deprecated-%E2%86%92-Replacement","level":2},{"rows":[[[{"type":"paragraph","inlineContent":[{"type":"text","text":"Deprecated (AutoDIOptimizer)"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"Replacement"}]}]],[[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"getCurrentStats()"}]}],[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"UnifiedDI.stats()"},{"type":"text","text":" \/ "},{"type":"codeVoice","code":"DIContainer.getUsageStatistics()"}]}]],[[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"visualizeGraph()"}]}],[{"type":"paragraph","inlineContent":[{"code":"UnifiedDI.autoGraph()","type":"codeVoice"},{"text":" \/ ","type":"text"},{"code":"DIContainer.getAutoGeneratedGraph()","type":"codeVoice"}]}]],[[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"getFrequentlyUsedTypes()"}]}],[{"type":"paragraph","inlineContent":[{"code":"UnifiedDI.optimizedTypes()","type":"codeVoice"},{"text":" \/ ","type":"text"},{"code":"DIContainer.getOptimizedTypes()","type":"codeVoice"}]}]],[[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"getDetectedCircularDependencies()"}]}],[{"type":"paragraph","inlineContent":[{"code":"UnifiedDI.circularDependencies()","type":"codeVoice"},{"text":" \/ ","type":"text"},{"code":"DIContainer.getDetectedCircularDependencies()","type":"codeVoice"}]}]],[[{"type":"paragraph","inlineContent":[{"code":"isOptimized(_:)","type":"codeVoice"}]}],[{"type":"paragraph","inlineContent":[{"code":"UnifiedDI.isOptimized(_:)","type":"codeVoice"},{"text":" \/ ","type":"text"},{"code":"DIContainer.isAutoOptimized(_:)","type":"codeVoice"}]}]],[[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"getActorOptimizationSuggestions()"}]}],[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"UnifiedDI.actorOptimizations"}]}]],[[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"getDetectedTypeSafetyIssues()"}]}],[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"UnifiedDI.typeSafetyIssues"}]}]],[[{"type":"paragraph","inlineContent":[{"code":"getDetectedAutoFixedTypes()","type":"codeVoice"}]}],[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"UnifiedDI.autoFixedTypes"}]}]],[[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"getActorHopStats()"}]}],[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"UnifiedDI.actorHopStats"}]}]],[[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"getAsyncPerformanceStats()"}]}],[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"UnifiedDI.asyncPerformanceStats"}]}]],[[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"getRecentGraphChanges(...)"}]}],[{"type":"paragraph","inlineContent":[{"code":"UnifiedDI.getGraphChanges(...)","type":"codeVoice"}]}]],[[{"type":"paragraph","inlineContent":[{"code":"getCurrentLogLevel()","type":"codeVoice"}]}],[{"type":"paragraph","inlineContent":[{"code":"UnifiedDI.logLevel","type":"codeVoice"},{"type":"text","text":" \/ "},{"code":"UnifiedDI.getLogLevel()","type":"codeVoice"}]}]]],"type":"table","header":"row"},{"name":"내부 용도","type":"aside","content":[{"inlineContent":[{"text":"","type":"text"},{"code":"AutoDIOptimizer.readSnapshot()","type":"codeVoice"},{"text":"으로 스냅샷을 읽어 필요한 값을 계산하세요.","type":"text"}],"type":"paragraph"}],"style":"note"},{"text":"코드 변경 예시","type":"heading","anchor":"%EC%BD%94%EB%93%9C-%EB%B3%80%EA%B2%BD-%EC%98%88%EC%8B%9C","level":2},{"text":"그래프\/통계 읽기","type":"heading","anchor":"%EA%B7%B8%EB%9E%98%ED%94%84%ED%86%B5%EA%B3%84-%EC%9D%BD%EA%B8%B0","level":3},{"syntax":"diff","type":"codeListing","code":["- let graph = AutoDIOptimizer.shared.visualizeGraph()","+ let graph = UnifiedDI.autoGraph()","","- let stats = AutoDIOptimizer.shared.getCurrentStats()","+ let stats = UnifiedDI.stats()","","- let optimized = AutoDIOptimizer.shared.getFrequentlyUsedTypes()","+ let optimized = UnifiedDI.optimizedTypes()"]},{"text":"로그 레벨","type":"heading","anchor":"%EB%A1%9C%EA%B7%B8-%EB%A0%88%EB%B2%A8","level":3},{"syntax":"diff","type":"codeListing","code":["- let level = AutoDIOptimizer.shared.getCurrentLogLevel()","+ let level = UnifiedDI.logLevel","","- AutoDIOptimizer.shared.setLogLevel(.errors)","+ UnifiedDI.setLogLevel(.errors)"]},{"text":"순환 의존성","type":"heading","anchor":"%EC%88%9C%ED%99%98-%EC%9D%98%EC%A1%B4%EC%84%B1","level":3},{"syntax":"diff","type":"codeListing","code":["- let cycles = AutoDIOptimizer.shared.getDetectedCircularDependencies()","+ let cycles = UnifiedDI.circularDependencies()"]},{"text":"테스트 마이그레이션 팁","type":"heading","anchor":"%ED%85%8C%EC%8A%A4%ED%8A%B8-%EB%A7%88%EC%9D%B4%EA%B7%B8%EB%A0%88%EC%9D%B4%EC%85%98-%ED%8C%81","level":2},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"스냅샷은 비차단 전송 후 디바운스(기본 100ms)로 반영됩니다. 타이밍 민감한 테스트는 폴링 헬퍼를 사용하세요."}],"type":"paragraph"}]}],"type":"unorderedList"},{"syntax":"swift","type":"codeListing","code":["waitUntil(description: \"wait snapshot\") {","    UnifiedDI.autoGraph().contains(\"SomeType\")","}"]},{"text":"성능 관련","type":"heading","anchor":"%EC%84%B1%EB%8A%A5-%EA%B4%80%EB%A0%A8","level":2},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"디바운스 간격은 "},{"code":"UnifiedDI.configureOptimization(debounceMs:)","type":"codeVoice"},{"type":"text","text":"에서 설정 가능합니다(권장: 50\/100\/200ms 실험)."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"핫패스에서 추적은 fire-and-forget(Task)로 비차단 전송되어 p95\/p99 지연 개선에 유리합니다.","type":"text"}]}]}],"type":"unorderedList"},{"text":"부트스트랩 관련(변경 없음)","type":"heading","anchor":"%EB%B6%80%ED%8A%B8%EC%8A%A4%ED%8A%B8%EB%9E%A9-%EA%B4%80%EB%A0%A8%EB%B3%80%EA%B2%BD-%EC%97%86%EC%9D%8C","level":2},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"2.x.x의 부트스트랩 API 그대로 사용 가능합니다. 상세는 ","type":"text"},{"identifier":"doc:\/\/DiContainer\/documentation\/DiContainer\/Bootstrap","isActive":true,"type":"reference"},{"text":" 참고.","type":"text"}]}]}],"type":"unorderedList"},{"text":"FAQ","type":"heading","anchor":"FAQ","level":2},{"text":"AutoDIOptimizer.readSnapshot()을 외부에서 써도 되나요?","type":"heading","anchor":"AutoDIOptimizerreadSnapshot%EC%9D%84-%EC%99%B8%EB%B6%80%EC%97%90%EC%84%9C-%EC%8D%A8%EB%8F%84-%EB%90%98%EB%82%98%EC%9A%94","level":3},{"inlineContent":[{"text":"내부용을 권장합니다. 외부에서는 ","type":"text"},{"code":"UnifiedDI","type":"codeVoice"},{"text":"\/","type":"text"},{"code":"DIContainer","type":"codeVoice"},{"text":"의 동기 헬퍼(스냅샷 기반)를 사용하세요.","type":"text"}],"type":"paragraph"},{"text":"Deprecated API는 언제 제거되나요?","type":"heading","anchor":"Deprecated-API%EB%8A%94-%EC%96%B8%EC%A0%9C-%EC%A0%9C%EA%B1%B0%EB%90%98%EB%82%98%EC%9A%94","level":3},{"inlineContent":[{"text":"3.x에서 Deprecated로 유지되며, 4.0에서 제거될 수 있습니다. 본 문서의 Replacement로 교체하세요.","type":"text"}],"type":"paragraph"}]}],"abstract":[{"text":"이 문서는 2.x.x에서 3.0.0으로 업그레이드할 때 필요한 변경 사항과 권장 마이그레이션 경로를 정리합니다.","type":"text"}],"references":{"doc://DiContainer/documentation/DiContainer":{"identifier":"doc:\/\/DiContainer\/documentation\/DiContainer","abstract":[],"url":"\/documentation\/dicontainer","kind":"symbol","role":"collection","title":"DiContainer","type":"topic"},"doc://DiContainer/documentation/DiContainer/Bootstrap":{"role":"article","kind":"article","identifier":"doc:\/\/DiContainer\/documentation\/DiContainer\/Bootstrap","title":"부트스트랩 가이드 (Bootstrap)","type":"topic","url":"\/documentation\/dicontainer\/bootstrap","abstract":[{"text":"앱 시작 시 의존성을 안전하고 일관되게 준비하는 방법을 소개합니다. DiContainer는 다양한 부트스트랩 패턴을 제공하여 동기\/비동기 초기화, 테스트 격리, 조건부 초기화 등을 유연하게 구성할 수 있습니다.","type":"text"}]}}}